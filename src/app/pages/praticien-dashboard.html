<div class="dashboard-layout">
  <!-- ‚úÖ Sidebar cliquable -->
  <div class="sidebar">
    <div class="sidebar-header">
      <div class="logo-circle">
        <i class="fas fa-user-tie"></i>
      </div>
      <span class="sidebar-title">Praticien</span>
    </div>

    <nav class="sidebar-nav">
      <a (click)="showSection('home')" class="nav-item" [class.active]="activeSection === 'home'">
        <i class="fas fa-th-large"></i>
        <span>Accueil</span>
      </a>
      <a (click)="showSection('agenda')" class="nav-item" [class.active]="activeSection === 'agenda'">
        <i class="fas fa-calendar-check"></i>
        <span>Mon Agenda</span>
      </a>
      <a (click)="showSection('clients')" class="nav-item" [class.active]="activeSection === 'clients'">
        <i class="fas fa-user section-icon" style="color: white;"></i>

        <span>Mes Clients</span>
      </a>
      <a (click)="showSection('creneaux')" class="nav-item" [class.active]="activeSection === 'creneaux'">
        <i class="fas fa-clock"></i>
        <span>Mes cr√©neaux</span>
      </a>
      <a (click)="showSection('remplacants')" class="nav-item" [class.active]="activeSection === 'remplacants'">
       <i class="fas fa-user-clock section-icon"style="color: white;"></i>
        <span>Mes rempla√ßants</span>
      </a>
      <a (click)="showSection('collaboration')" class="nav-item" [class.active]="activeSection === 'collaboration'">
        <i class="fas fa-users"></i>
        <span>Collaboration</span>
      </a>
      <a (click)="showSection('documents')" class="nav-item" [class.active]="activeSection === 'documents'">
        <i class="fas fa-file-medical"></i>
        <span>Documents</span>
      </a>
    </nav>

    <div class="sidebar-footer">
      <a class="nav-item" (click)="confirmLogout()">
        <i class="fas fa-sign-out-alt"></i>
        <span>D√©connexion</span>
      </a>
    </div>
  </div>

  <!-- ‚úÖ Contenu principal avec votre code existant -->
  <div class="main-content">
    <div class="dashboard-container">
      <!-- ‚úÖ Page d'accueil avec vos cartes originales -->
      <div *ngIf="activeSection === 'home'" class="home-section">
        <h1>Bienvenue <i class="fas fa-handshake"></i></h1>
        <p>Ceci est votre espace personnel praticien.</p>

        <!-- Navigation avec vos cartes originales -->
        <div class="card-grid">
          <div class="card" (click)="showSection('agenda')">
            <i class="fas fa-calendar-alt card-icon"></i>
            <h3>Mon Agenda</h3>
            <p>G√©rez vos rendez-vous et disponibilit√©s</p>
          </div>
          <div class="card" (click)="showSection('clients')">
            <i class="fas fa-user card-icon"></i>
            <h3>Mes Clients</h3>
            <p>Dossiers clients et historiques</p>
          </div>
          <div class="card" (click)="showSection('creneaux')">
            <i class="fas fa-clock card-icon"></i>
            <h3>Mes cr√©neaux</h3>
            <p>G√©rez vos disponibilit√©s horaires</p>
          </div>
          <div class="card" (click)="showSection('remplacants')">
            <i class="fas fa-user-clock card-icon"></i>
            <h3>Mes rempla√ßants</h3>
            <p>Ajoutez et g√©rez vos rempla√ßants</p>
          </div>
          <div class="card" (click)="showSection('collaboration')">
            <i class="fas fa-users card-icon"></i>
            <h3>Collaboration</h3>
            <p>Communication avec autres praticiens</p>
          </div>
          <div class="card" (click)="showSection('documents')">
            <i class="fas fa-file-medical card-icon"></i>
            <h3>Documents</h3>
            <p>Ordonnances et comptes-rendus</p>
          </div>
        </div>
      </div>

         <!-- ‚úÖ Sections dynamiques - Votre code existant -->
      <div class="section-container" *ngIf="activeSection !== 'none'">
        <ng-container [ngSwitch]="activeSection">
          
          <!-- üìÖ AGENDA -->
<div *ngSwitchCase="'agenda'" class="agenda-section">
  <!-- Disposition √† deux panneaux -->
  <div class="agenda-layout">
    
    <!-- Panneau gauche - Visites du jour -->
    <div class="visits-panel">
      <div class="visits-header">
        <h2>Visites du jour</h2>
        <p>{{ getCurrentDate() }}</p>
      </div>
      
      <div class="visits-list">
       <div *ngFor="let visit of visitesDuJour" class="visit-item">
  <img [src]="visit.avatar" class="patient-avatar" [alt]="visit.patientName" />
  <div class="visit-details">
    <div class="visit-time">{{ visit.time }}</div>
    <div class="patient-name">{{ visit.patientName }}</div>
  </div>
  <div class="visit-status" [class]="'status-' + visit.type"></div>
</div>
      </div>
      
      <!-- Carte promotionnelle du planificateur -->
      <div class="planner-promo">
        <h3>Essayez notre planificateur de visites !</h3>
        <p>Le planificateur organise automatiquement les appels et visites selon l'historique. Vous n'aurez qu'√† confirmer !</p>
        <a href="#" class="promo-link">Essayer maintenant ‚Üí</a>
        <div class="promo-illustration">
          <i class="fas fa-calendar-alt"></i>
        </div>
      </div>
    </div>
    
    <!-- Panel droit - Calendar -->
    <div class="calendar-main">
      <!-- Header avec profil patient -->
      <div class="calendar-header">
        <h1>Calendrier</h1>
        <div class="header-actions">
          <div class="patient-profile">
            <div class="patient-info">
              <div class="patient-name">John Doe</div>
              <div class="patient-status">Praticien</div>
            </div>
          </div>
        <button class="schedule-btn" (click)="addAppointment()">
    <i class="fas fa-plus"></i> Planifier une visite
</button>
        </div>
      </div>
      
    <!-- Navigation du calendrier -->
<div class="calendar-nav">
  <div class="view-tabs">
    <button (click)="changeView('day')" [class.active]="calendarView === 'day'">Jour</button>
    <button (click)="changeView('week')" [class.active]="calendarView === 'week'">Semaine</button>
    <button (click)="changeView('month')" [class.active]="calendarView === 'month'">Mois</button>
    <button (click)="changeView('year')" [class.active]="calendarView === 'year'">Ann√©e</button>
  </div>
  
 <div class="month-nav">
  <button class="nav-arrow" (click)="moisPrecedent()">
    <i class="fas fa-chevron-left"></i>
  </button>
  <span class="current-period">{{ getMonthYear() }}</span>
  <button class="nav-arrow" (click)="moisSuivant()">
    <i class="fas fa-chevron-right"></i>
  </button>
</div>
</div>
      
      <!-- Grille du calendrier -->
      <div class="calendar-container">
        <div class="calendar-weekdays">
          <div class="weekday" *ngFor="let day of joursSemaine">{{ day }}</div>
        </div>
        
        <div class="calendar-grid">
  <div 
    *ngFor="let jour of joursCalendrier" 
    class="calendar-cell"
    [class.today]="jour.estAujourdhui"
    [class.prev-month]="jour.estMoisPrecedent"
    [class.next-month]="jour.estMoisSuivant"
  >
    <span class="date-number">{{ jour.date }}</span>
    <div class="cell-events" *ngIf="jour.evenements && jour.evenements.length > 0">
      <span 
        *ngFor="let event of jour.evenements" 
        class="event-badge"
        [class]="'badge-' + event.type"
      >
        {{ event.label }} {{ event.count > 0 ? event.count : '' }}
      </span>
    </div>
  </div>
</div>
      </div>
    </div>
    
  </div>
</div>
          <!-- Section Collaboration entre praticiens -->
          <div *ngSwitchCase="'collaboration'" class="collaboration-section">
            <h2><i class="fas fa-comments section-icon"></i> Espace collaboratif</h2>

            <div class="communication-tabs">
              <button (click)="setCommTab('messagerie')" [class.active]="commTab === 'messagerie'">
                <i class="fas fa-comment-dots"></i> Messagerie
              </button>
              <button (click)="setCommTab('video')" [class.active]="commTab === 'video'">
                <i class="fas fa-video"></i> Visio-conf√©rence
              </button>
              <button (click)="setCommTab('forum')" [class.active]="commTab === 'forum'">
                <i class="fas fa-users"></i> Forum sp√©cialis√©
              </button>
            </div>
            <div class="communication-content">
              <!-- Messagerie instantan√©e -->
              <div *ngIf="commTab === 'messagerie'" class="messagerie">
                <div class="contact-list">
                  <div
                    class="contact"
                    *ngFor="let contact of contacts"
                    [class.active]="activeContact === contact.id"
                    (click)="selectContact(contact.id)"
                  >
                    <img [src]="contact.avatar" alt="Photo" class="contact-avatar" />
                    <div class="contact-info">
                      <span class="contact-name">{{ contact.name }}</span>
                      <span class="contact-specialty">{{ contact.specialty }}</span>
                    </div>
                    <!-- CORRECTION ICI : Utilisation de *ngIf avec 'as' pour 'unread' -->
                   <span class="badge" *ngIf="(contact.unread || 0) > 0">{{ contact.unread }}</span>
                </div>
                </div>

                <div class="chat-area">
                  <div class="chat-messages">
                    <div *ngFor="let msg of messages" class="message" [class.sent]="msg.sent">
                      <div class="message-content">{{ msg.text }}</div>
                      <div class="message-time">{{ msg.time | date: 'HH:mm' }}</div>
                    </div>
                  </div>

                  <div class="message-input">
                    <input
                      type="text"
                      [(ngModel)]="newMessage"
                      placeholder="√âcrivez un message..."
                      (keyup.enter)="sendMessage()"
                    />
                    <button (click)="sendMessage()"><i class="fas fa-paper-plane"></i></button>
                  </div>
                </div>
              </div>
              <!-- Appel vid√©o/audio -->
              <div *ngIf="commTab === 'video'" class="video-call">
                <div class="call-controls">
                  <button class="btn-call" (click)="startVideoCall()">
                    <i class="fas fa-video"></i> Nouvel appel vid√©o
                  </button>
                  <button class="btn-call" (click)="startAudioCall()">
                    <i class="fas fa-phone"></i> Appel audio
                  </button>
                </div>

                <div class="call-placeholder">
                  <i class="fas fa-video-slash"></i>
                  <p>Pr√™t √† d√©marrer une consultation √† distance</p>
                  <p>Fonctionnalit√©s : partage d'√©cran, tableau blanc collaboratif</p>
                </div>
              </div>
              <!-- Forum sp√©cialis√© -->
              <div *ngIf="commTab === 'forum'" class="forum">
                <div class="forum-topics">
                  <div class="topic" *ngFor="let topic of forumTopics">
                    <h4>{{ topic.title }}</h4>
                    <p>{{ topic.lastMessage }}</p>
                    <div class="topic-meta">
                      <span>{{ topic.replies }} r√©ponses</span>
                      <span>Dernier message : {{ topic.lastDate | date: 'dd/MM/yyyy' }}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Section Cr√©neaux -->
          <div *ngSwitchCase="'creneaux'">
            <h2><i class="fas fa-clock section-icon"></i> Mes cr√©neaux</h2>
            <p>Ici, affiche la gestion des cr√©neaux horaires</p>
            <!-- TODO : ajoute ton contenu r√©el ici -->
          </div>
          <!-- Section Rempla√ßants -->
          <div *ngSwitchCase="'remplacants'">
            <h2><i class="fas fa-user-tie "></i> Mes rempla√ßants</h2>
            <p>Ici, affiche la liste des rempla√ßants et leurs infos</p>
            <!-- TODO : ajoute ton contenu r√©el ici -->
          </div>
          <!-- Section Patients -->
          <div *ngSwitchCase="'clients'">
            <h2><i class="fas fa-user-tag section-icon"></i> Dossiers clients</h2>
            <p>Liste des clients avec fonctionnalit√©s de recherche et filtres</p>
          </div>
          <!-- Section Documents -->
          <div *ngSwitchCase="'documents'">
            <h2><i class="fas fa-file-signature section-icon"></i> Documents m√©dicaux</h2>
            <p>Gestion des ordonnances, comptes-rendus et certificats</p>
          </div>
          <!-- Vue par d√©faut -->
          <div *ngSwitchDefault>
            <div class="welcome-message">
              <i class="fas fa-clinic-medical section-icon"></i>
              <h3>Bienvenue dans votre espace praticien</h3>
              <p>S√©lectionnez une section pour commencer</p>
            </div>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
  <!-- ‚úÖ Popup de d√©connexion -->
  <div *ngIf="showLogoutConfirm" class="logout-confirm-popup">
    <div class="popup-arrow"></div>
    <p>√ätes-vous s√ªr de vouloir quitter ?</p>
    <div class="popup-buttons">
      <button (click)="logout()" class="btn-yes">Oui</button>
      <button (click)="cancelLogout()" class="btn-no">Non</button>
    </div>
  </div>
</div>